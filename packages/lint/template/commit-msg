#!/usr/bin/env node
const childProcess = require('child_process');
const fs = require('fs');

console.log('[zalint]', 'æ£€æŸ¥ commit æ¶ˆæ¯æ ¼å¼');

const msg = fs.readFileSync(process.argv[2], 'utf-8').trim();
const commitRE =
  /^(((\ud83c[\udf00-\udfff])|(\ud83d[\udc00-\ude4f\ude80-\udeff])|[\u2600-\u2B55]) )?(revert: )?(feat|fix|docs|UI|refactor|perf|workflow|build|CI|typos|chore|tests|types|wip|release|dep|locale)(\(.+\))?: .{1,50}/;

if (!commitRE.test(msg)) {
  console.log();
  console.error('æäº¤æ—¥å¿—ä¸ç¬¦åˆè§„èŒƒ, åˆæ³•çš„æäº¤æ—¥å¿—æ ¼å¼å¦‚ä¸‹(emoji å’Œ æ¨¡å—å¯é€‰å¡«)ï¼š\n\n');
  console.error('ğŸ’¥ feat(æ¨¡å—): æ·»åŠ äº†ä¸ªå¾ˆæ£’çš„åŠŸèƒ½');
  console.error('ğŸ› fix(æ¨¡å—): ä¿®å¤äº†ä¸€äº› bug');
  console.error('ğŸ“ docs(æ¨¡å—): æ›´æ–°äº†ä¸€ä¸‹æ–‡æ¡£');
  console.error('ğŸŒ· UI(æ¨¡å—): ä¿®æ”¹äº†ä¸€ä¸‹æ ·å¼');
  console.error('ğŸ° chore(æ¨¡å—): å¯¹è„šæ‰‹æ¶åšäº†äº›æ›´æ”¹');
  process.exit(1);
}
